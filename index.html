<!-- Referencias -->
<!-- https://developer.mozilla.org/es/docs/Web/API/Intersection_Observer_API -->
<!-- https://www.youtube.com/watch?v=sO7nDHDLlBQ -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Intersection Observer</title>
  </head>
  <body>
    <center>
      <h1>Posts</h1>

      <div>
        <h3>Post 01</h3>
        <img class="imagePost" data-src="images/image_01.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 02</h3>
        <img class="imagePost" data-src="images/image_02.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 03</h3>
        <img class="imagePost" data-src="images/image_03.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 04</h3>
        <img class="imagePost" data-src="images/image_04.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 05</h3>
        <img class="imagePost" data-src="images/image_05.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 06</h3>
        <img class="imagePost" data-src="images/image_06.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 07</h3>
        <img class="imagePost" data-src="images/image_07.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 08</h3>
        <img class="imagePost" data-src="images/image_08.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 09</h3>
        <img class="imagePost" data-src="images/image_09.jpeg" width="700" height="500" />
      </div>

      <div>
        <h3>Post 10</h3>
        <img class="imagePost" data-src="images/image_10.jpeg" width="700" height="500" />
      </div>
    </center>

    <script>
      var options = {
        rootMargin: "0px",
        threshold: 0.15
      };

      var images = document.querySelectorAll(".imagePost");

      var observer = new IntersectionObserver(function(entries, observer) {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            var img = entry.target
            img.setAttribute('src', img.getAttribute('data-src'))
            observer.unobserve(entry.target)
          }
        });
      }, options);

      images.forEach(img => {
        observer.observe(img);
      });
    </script>
  </body>
</html>
